(()=>{"use strict";var e={357:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CrackSeedButton=void 0;const i=s(786),o=s(935);class a{constructor(){this.div=document.getElementById("cracking-result"),this.button=document.getElementById("crack-seed-button");let e=Math.max(window.navigator.hardwareConcurrency,1);this.seedCracker=new i.SeedCracker(this,e),this.button.addEventListener("click",(()=>{this.seedCracker.updateOutcomeList(o.OutcomeList.getOutcomes())}))}notifyFailure(){this.div.textContent="Something went wrong,\n            no viable seed found...\n            Double-check that the sequence of casts is correct,\n            cast FtHoF only when there are no on-screen golden cookies,\n            do not have Dragonflight active,\n            make sure you own at least 10 buildings,\n            reload the page, and try again."}notifySuccess(e){this.div.textContent=`Success! Your seed is ${e}`}notifyProgress(e){this.div.textContent=Math.floor(1e4*e)/100+"% seeds scanned..."}notifyDuplicate(e){this.div.textContent=`Multiple viable seeds (like ${e[0]} and ${e[1]}).\n            Cast FtHoF another time and click here again!`}}t.CrackSeedButton=a,a.instance=new a},36:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FtHoFOutcomeFrame=void 0;const i=s(218),o=s(271);class a{constructor(){this.outcome=new o.FtHoFOutcome,this.div=a.template.cloneNode(!0),this.spellsCastCounter=this.div.querySelector(".spells-cast-counter"),this.successIcon=this.div.querySelector(".outcome-success-icon"),this.backfireIcon=this.div.querySelector(".outcome-backfire-icon"),this.gcOutcomeDivs=Array.from(this.div.querySelector(".gc-effect-list").children),this.easterIcon=this.div.querySelector(".easter-season-icon"),this.valentinesIcon=this.div.querySelector(".valentines-season-icon"),this.easterSuccessVariantIcons=[],this.easterBackfireVariantIcons=[];for(let e of this.div.querySelectorAll(".easter-bunny-icon")){let t=Number(e.style.getPropertyValue("--index"));""==e.style.getPropertyValue("--wrath")?this.easterSuccessVariantIcons[t]=e:this.easterBackfireVariantIcons[t]=e}this.valentinesVariantIcons=[];for(let e of this.div.querySelectorAll(".valentines-heart-icon")){let t=Number(e.style.getPropertyValue("--index"));this.valentinesVariantIcons[t]=e}this.addHandlers()}getOutcome(){return this.outcome}getDiv(){return this.div}showGCOutcomes(e){for(let t of e)this.gcOutcomeDivs[t].classList.remove("inactive")}hideGCOutcomes(e){for(let t of e)this.gcOutcomeDivs[t].classList.add("inactive")}deselectSeasonalIcons(e=!0){for(let e of this.easterBackfireVariantIcons)e.classList.remove("selected");for(let e of this.easterSuccessVariantIcons)e.classList.remove("selected");for(let e of this.valentinesVariantIcons)e.classList.remove("selected");e&&(this.easterIcon.classList.remove("selected"),this.valentinesIcon.classList.remove("selected"))}hideSeasonalIcons(){for(let e of this.easterBackfireVariantIcons)e.classList.add("inactive");for(let e of this.easterSuccessVariantIcons)e.classList.add("inactive");for(let e of this.valentinesVariantIcons)e.classList.add("inactive")}showAppropriateEasterVariantIcons(){if("easter"!=this.outcome.season)return;let e=this.outcome.seasonalVariantIndex;if(this.hideSeasonalIcons(),this.outcome.backfire){for(let e of this.easterBackfireVariantIcons)e.classList.remove("inactive");null!=e&&e<this.easterBackfireVariantIcons.length&&this.easterBackfireVariantIcons[e].classList.add("selected")}else{for(let e of this.easterSuccessVariantIcons)e.classList.remove("inactive");null!=e&&e<this.easterSuccessVariantIcons.length&&this.easterSuccessVariantIcons[e].classList.add("selected")}}addHandlers(){this.spellsCastCounter.addEventListener("input",(()=>{this.outcome.spellsCast=this.spellsCastCounter.valueAsNumber})),this.successIcon.addEventListener("click",(()=>{this.successIcon.classList.add("selected"),this.backfireIcon.classList.remove("selected"),this.hideGCOutcomes(i.BackfireGCOutcomes),this.showGCOutcomes(i.SuccessGCOutcomes),this.outcome.backfire=!1,this.showAppropriateEasterVariantIcons()})),this.backfireIcon.addEventListener("click",(()=>{this.successIcon.classList.remove("selected"),this.backfireIcon.classList.add("selected"),this.hideGCOutcomes(i.SuccessGCOutcomes),this.showGCOutcomes(i.BackfireGCOutcomes),this.outcome.backfire=!0,this.showAppropriateEasterVariantIcons()}));for(let e of i.AllGCOutcomes)this.gcOutcomeDivs[e].addEventListener("click",(()=>{for(let e of this.gcOutcomeDivs)e.classList.remove("selected");this.gcOutcomeDivs[e].classList.add("selected"),this.outcome.gcOutcome=e}));this.easterIcon.addEventListener("click",(()=>{this.deselectSeasonalIcons(),"easter"==this.outcome.season?this.outcome.season="":(this.outcome.season="easter",this.easterIcon.classList.add("selected")),this.outcome.seasonalVariantIndex=void 0,this.showAppropriateEasterVariantIcons()})),this.valentinesIcon.addEventListener("click",(()=>{this.deselectSeasonalIcons(),this.hideSeasonalIcons(),"valentines"==this.outcome.season?this.outcome.season="":(this.outcome.season="valentines",this.valentinesIcon.classList.add("selected")),this.outcome.seasonalVariantIndex=void 0;for(let e of this.valentinesVariantIcons)e.classList.remove("inactive")}));let e=(e,t)=>{t.addEventListener("click",(()=>{this.deselectSeasonalIcons(!1),t.classList.add("selected"),this.outcome.seasonalVariantIndex=e}))};for(let t in this.easterBackfireVariantIcons)e(+t,this.easterBackfireVariantIcons[t]);for(let t in this.easterSuccessVariantIcons)e(+t,this.easterSuccessVariantIcons[t]);for(let t in this.valentinesVariantIcons)e(+t,this.valentinesVariantIcons[t])}}t.FtHoFOutcomeFrame=a,a.template=document.querySelector("#outcome-frame-template").content.querySelector(".outcome-frame")},271:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FtHoFOutcome=void 0;const i=s(218);class o{constructor(e=i.GCOutcome.Frenzy,t=!1,s=0,o="",a){this.gcOutcome=e,this.backfire=t,this.spellsCast=s,this.season=o,this.seasonalVariantIndex=a}equals(e){return e instanceof o&&this.gcOutcome===e.gcOutcome&&this.backfire===e.backfire&&this.spellsCast===e.spellsCast&&this.season===e.season&&(""===this.season||this.seasonalVariantIndex===e.seasonalVariantIndex)}static fromObject(e){if("object"!=typeof e)return null;if(!("gcOutcome"in e)||typeof e.gcOutcome!=typeof i.GCOutcome.Sweet)return null;let t=e.gcOutcome;if(!(t in i.GCOutcome))return null;if(!("backfire"in e)||"boolean"!=typeof e.backfire)return null;let s=e.backfire;if(!("spellsCast"in e)||"number"!=typeof e.spellsCast)return null;let a=e.spellsCast;if(""!=e.season&&"valentines"!=e.season&&"easter"!=e.season)return null;let c,n=e.season;if(""!=n){if(!("seasonalVariantIndex"in e)||"number"!=typeof e.seasonalVariantIndex)return null;c=e.seasonalVariantIndex}return new o(t,s,a,n,c)}}t.FtHoFOutcome=o},218:(e,t)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.AllGCOutcomes=t.BackfireGCOutcomes=t.SuccessGCOutcomes=t.GCOutcome=void 0,function(e){e[e.Frenzy=0]="Frenzy",e[e.Lucky=1]="Lucky",e[e.ClickFrenzy=2]="ClickFrenzy",e[e.CookieStorm=3]="CookieStorm",e[e.Blab=4]="Blab",e[e.BuildingSpecial=5]="BuildingSpecial",e[e.CookieStormDrop=6]="CookieStormDrop",e[e.Sweet=7]="Sweet",e[e.Clot=8]="Clot",e[e.Ruin=9]="Ruin",e[e.CursedFinger=10]="CursedFinger",e[e.ElderFrenzy=11]="ElderFrenzy"}(s=t.GCOutcome||(t.GCOutcome={})),t.SuccessGCOutcomes=[s.Frenzy,s.Lucky,s.ClickFrenzy,s.CookieStorm,s.Blab,s.BuildingSpecial,s.CookieStormDrop,s.Sweet],t.BackfireGCOutcomes=[s.Blab,s.Sweet,s.Clot,s.Ruin,s.CursedFinger,s.ElderFrenzy],t.AllGCOutcomes=Object.keys(s).filter((e=>!isNaN(Number(e)))).map((e=>Number(e)))},519:(e,t,s)=>{s(36),s(935),s(357)},935:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OutcomeList=void 0;const i=s(36);class o{constructor(){this.outcomeFrames=[],this.buttonDiv=document.getElementById("new-outcome-button"),this.listDiv=document.getElementById("outcome-list"),this.addHandlers()}addHandlers(){this.buttonDiv.addEventListener("click",(()=>{let e=new i.FtHoFOutcomeFrame;this.outcomeFrames.push(e),this.listDiv.insertBefore(e.getDiv(),this.buttonDiv)})),this.buttonDiv.click()}static getOutcomes(){return o.instance.outcomeFrames.map((e=>e.getOutcome()))}}t.OutcomeList=o,o.instance=new o},450:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SeedCrackerWorker=void 0,t.SeedCrackerWorker=class{constructor(e,t,s){this.worker=new Worker("./dist/seed-cracker.worker.js"),this.worker.onmessage=e=>s.onMessage(t,e.data),this.worker.postMessage({partCount:e,part:t})}postMessage(e){this.worker.postMessage(e)}}},786:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SeedCracker=void 0;const i=s(450);t.SeedCracker=class{constructor(e,t){this.logicalTime=0,this.pendingWorkers=0,this.completionPercentage=[],this.seedCandidates=[],this.callback=e,this.workers=Array(t);for(let e=0;e<t;e++)this.workers[e]=new i.SeedCrackerWorker(t,e,this)}updateOutcomeList(e){this.logicalTime++,this.pendingWorkers=this.workers.length,this.completionPercentage=Array(this.workers.length).fill(0),this.seedCandidates=[];for(let t of this.workers)t.postMessage(this.logicalTime),t.postMessage(e)}onMessage(e,t){t.logicalTime==this.logicalTime&&("done"in t?this.processCompletionMessage(e):"progress"in t?this.processProgressMessage(e,t.progress):"seed"in t?this.processSeedMessage(e,t.seed):console.log("Extraneous message: "+t))}processCompletionMessage(e){this.pendingWorkers--,this.pendingWorkers>0||(0==this.seedCandidates.length?this.callback.notifyFailure():1==this.seedCandidates.length&&this.callback.notifySuccess(this.seedCandidates[0]))}processProgressMessage(e,t){this.completionPercentage[e]=t;let s=this.completionPercentage.reduce(((e,t)=>e+t),0)/this.workers.length;this.callback.notifyProgress(s)}processSeedMessage(e,t){if(this.seedCandidates.push(t),this.seedCandidates.length>1){this.logicalTime++;for(let e of this.workers)e.postMessage(this.logicalTime);this.callback.notifyDuplicate(this.seedCandidates)}}}}},t={};!function s(i){if(t[i])return t[i].exports;var o=t[i]={exports:{}};return e[i](o,o.exports,s),o.exports}(519)})();